/*!;
  * vue-script2 v2.1.0
  * (c) 2016-2017 Greg Slepak
  * @license MIT License
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_={isUndefined:function(t){return void 0===t},pick:function(t,e){var n={};return e.forEach(function(e){n[e]=t[e]}),n},omit:function(t,e){var n={};return Object.keys(t).forEach(function(r){-1===e.indexOf(r)&&(n[r]=t[r])}),n},omitBy:function(t,e){var n={};return Object.keys(t).forEach(function(r){e(t[r])||(n[r]=t[r])}),n},defaults2:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){Object.keys(e).forEach(function(n){(_.isUndefined(t[n])||""===t[n])&&(t[n]=e[n])})})}},Script2={installed:!1,p:Promise.resolve(),version:"2.1.0",loaded:{},install:function(t){if(!Script2.installed){var e=["unload","data","reload","delay"].concat(["src","type","async","integrity","text","crossorigin"]);t.component("script2",{props:e,template:'<div style="display:none"><slot></slot></div>',mounted:function(){var t=this,n=this.$el.parentElement;if(this.src){var r=_.omitBy(_.pick(this,e),_.isUndefined);r.parent=n;var i=function(){return Script2.load(t.src,r)};_.isUndefined(this.async)?Script2.p=Script2.p.then(i):i()}else Script2.p=Script2.p.then(function(){var e=document.createElement("script");e.type="text/javascript",e.appendChild(document.createTextNode(t.$el.innerHTML)),n.appendChild(e)});this.$nextTick(function(){t.$el.remove()})},destroyed:function(){this.unload&&(new Function(this.unload)(),delete Script2.loaded[this.src])}}),Script2.installed=!0}},load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{parent:document.head};return _.isUndefined(e.reload)||_.isUndefined(Script2.loaded[t])||delete Script2.loaded[t],Script2.loaded[t]?Promise.resolve(t):new Promise(function(n,r){var i=document.createElement("script");_.defaults2(i,_.omit(e,["unload","parent","reload","data","delay"]),{type:"text/javascript"}),i.async=!1,i.src=t,_.isUndefined(e.data)||e.data.constructor!==Object||Object.entries(e.data).forEach(function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1];i.dataset[n]=r}),i.crossOrigin=e.crossorigin,i.onload=function(){Script2.loaded[t]=!0,n(t)},i.onerror=function(){return r(new Error(t))},setTimeout(function(){return e.parent.appendChild(i)},e.delay||0)})}};exports.default=Script2;